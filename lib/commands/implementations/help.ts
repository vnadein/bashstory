import { CommandResult, CommandContext } from '../types'

export function cmdHelp(_args: string[], context: CommandContext): CommandResult {
  const isLoggedIn = !!context.userId

  if (!isLoggedIn) {
    return {
      output: [
        'Доступные команды (до авторизации):',
        '',
        '  help                    -- список команд',
        '  login                   -- авторизация',
        '  register                -- регистрация',
        '  trending                -- популярные посты за неделю',
        '  read <id>               -- прочитать пост с комментариями',
        '  finger [user]           -- профиль пользователя',
        '  whois [user]            -- синоним finger',
        '',
        'После авторизации станут доступны команды социальной сети.',
        'Введите help после входа для полного списка команд.',
      ],
    }
  }

  return {
    output: [
      'Доступные команды:',
      '',
      '--- Системные ---',
      '  help                    -- список команд',
      '  logout / exit           -- выход из аккаунта',
      '  passwd                  -- изменить пароль',
      '  reboot                  -- перезагрузка системы',
      '  whoami                  -- текущий пользователь',
      '  clear                   -- очистить экран',
      '  theme <hex>             -- установить цвет текста (#RRGGBB)',
      '  top                     -- мониторинг процессов',
      '',
      '--- Пользователи ---',
      '  finger [user]           -- профиль пользователя',
      '  whois [user]            -- синоним finger',
      '  users                   -- список пользователей',
      '',
      '--- Посты ---',
      '  post [текст]            -- опубликовать пост (Markdown)',
      '  posts [user]            -- посты пользователя',
      '  read / readpost <id>    -- прочитать пост с комментариями',
      '  reply <id> <текст>      -- ответить на пост',
      '  replyc <id> <#> <текст> -- ответить на комментарий',
      '  allposts / global       -- все посты',
      '  timeline / feed         -- лента подписок',
      '  share <id> [текст]      -- репост поста',
      '  trending                -- популярные посты за неделю',
      '  like <post_id>          -- поставить лайк',
      '  unlike <post_id>        -- убрать лайк',
      '',
      '--- Подписки ---',
      '  follow <user>           -- подписаться',
      '  unfollow <user>         -- отписаться',
      '  followers [user]        -- подписчики',
      '  following [user]        -- подписки',
      '',
      '--- Сообщения ---',
      '  msg <user> <текст>      -- отправить сообщение',
      '  mail / inbox            -- входящие сообщения',
      '  readmsg <id>            -- прочитать сообщение',
      '',
      '--- Уведомления ---',
      '  mentions                -- ваши упоминания',
      '  notify                  -- уведомления',
      '',
      '--- Настройки ---',
      '  set_bio <текст>         -- изменить профиль',
      '  block <user>            -- заблокировать пользователя',
      '  search <запрос>         -- поиск',
      '',
      '  Используйте --help после команды для подробной справки.',
    ],
  }
}
